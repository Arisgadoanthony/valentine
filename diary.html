<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Valentine Diary - Multimedia Edition</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --valentine-pink: #ffafbd;
            --valentine-red: #ff385c;
        }

        body {
            background: linear-gradient(135deg, #fff5f7 0%, #ffeef1 100%);
            min-height: 100vh;
            overflow-x: hidden;
            font-family: 'Inter', sans-serif;
        }

        /* Floating Background */
        #particle-container {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none; z-index: 0;
        }

        .floating-item {
            position: absolute;
            bottom: -50px;
            animation: floatUp linear infinite;
        }

        @keyframes floatUp {
            0% { transform: translateY(0) rotate(0deg); opacity: 0; }
            10% { opacity: 0.8; }
            90% { opacity: 0.8; }
            100% { transform: translateY(-110vh) rotate(360deg); opacity: 0; }
        }

        /* Slider Styles */
        .slider-container {
            position: relative;
            width: 100%;
            height: 400px;
            overflow: hidden;
            cursor: zoom-in;
        }

        .slider-track {
            display: flex;
            transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            height: 100%;
        }

        .slide {
            min-width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* Modal Design */
        #imageModal {
            backdrop-filter: blur(10px);
            background: rgba(0, 0, 0, 0.85);
            transition: opacity 0.3s ease;
        }

        .modal-content {
            animation: zoomIn 0.3s ease-out;
        }

        @keyframes zoomIn {
            from { transform: scale(0.9); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        /* Calendar */
        .calendar-day.active {
            background: var(--valentine-red);
            color: white;
            box-shadow: 0 4px 15px rgba(255, 56, 92, 0.4);
            transform: scale(1.1);
        }
    </style>
</head>
<body class="p-4 md:p-8">

<div id="particle-container"></div>

<div id="imageModal" class="fixed inset-0 z-[100] hidden flex flex-col items-center justify-center p-4">
    <button onclick="closeModal()" class="absolute top-6 right-6 text-white text-4xl hover:text-pink-400 transition">&times;</button>
    <div class="modal-content max-w-5xl w-full flex items-center justify-center">
        <img id="modalImg" src="" class="max-w-full max-h-[85vh] rounded-xl shadow-2xl border-4 border-white/10 object-contain">
    </div>
    <p id="modalCaption" class="text-white mt-4 font-medium tracking-wide bg-black/50 px-4 py-2 rounded-full"></p>
</div>

<div class="max-w-6xl mx-auto relative">
    <div class="flex flex-wrap items-center justify-between gap-4 mb-8">
        <a href="mainpage.html" class="inline-flex items-center gap-2 bg-white/80 backdrop-blur px-5 py-2 rounded-full text-pink-600 font-bold shadow-sm hover:bg-pink-500 hover:text-white transition-all group">
            <i class="fas fa-arrow-left group-hover:-translate-x-1 transition-transform"></i>
            Back
        </a>

        <div class="flex items-center gap-3 bg-white/80 backdrop-blur px-4 py-2 rounded-full shadow-sm border border-pink-100">
            <span class="text-pink-500 font-bold"><i class="fas fa-filter mr-1"></i> Year:</span>
            <select id="yearFilter" onchange="changeYear()" class="bg-transparent outline-none text-gray-700 font-bold cursor-pointer">
                <option value="2026">2026</option>
                <option value="2025">2025</option>
                <option value="2024">2024</option>
            </select>
        </div>
    </div>

    <header class="text-center mb-10">
        <h1 class="text-4xl font-bold text-pink-600 mb-2">
            <i class="fas fa-heart animate-bounce mr-2"></i>
            My Daily Story üå∏
        </h1>
    </header>

    <div class="grid grid-cols-1 lg:grid-cols-12 gap-8">
        <div class="lg:col-span-4 bg-white/90 backdrop-blur p-6 rounded-3xl shadow-xl border border-pink-100 h-fit">
            <div class="flex justify-between items-center mb-6 px-2">
                <h2 id="calendarTitle" class="text-2xl font-bold text-gray-800 italic">Feb</h2>
                <div class="flex gap-2">
                    <span class="text-xl">üìÖ</span><span class="text-xl">‚ú®</span>
                </div>
            </div>
            
            <div class="grid grid-cols-7 gap-2 text-center text-xs font-bold text-pink-400 mb-4 uppercase tracking-widest">
                <div>Sun</div><div>Mon</div><div>Tue</div><div>Wed</div><div>Thu</div><div>Fri</div><div>Sat</div>
            </div>
            
            <div id="calendarGrid" class="grid grid-cols-7 gap-2"></div>
        </div>

        <div class="lg:col-span-8">
            <div id="diaryDisplay" class="diary-card bg-white rounded-3xl shadow-2xl overflow-hidden border border-pink-100 min-h-[650px]">
                <div class="h-full flex flex-col items-center justify-center p-20 text-center">
                    <div class="text-8xl mb-6">üíå</div>
                    <h3 class="text-2xl font-bold text-pink-600">Choose a date on the calendar</h3>
                    <p class="text-gray-400 mt-2 italic">I've hidden a secret memory for every day we spend together...</p>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    // Expanded Diary Data to support Year Filter
    const diaryEntries = {
        "2026-02-12": { 
            title: "Sign of Her Love üíñ", 
            text: "She gave me a hair-tie that symbolize her existence in my life. Although I did't know how to express my feelings outside but inside I am filled with emotions I've never felt before. She might not know this but I will treasure this always as this makes me remind of hair hair and the smell of it.", 
            images: ["images/diary/hairtie12_1.jpg", "images/diary/hairtie12_2.jpg"]
        },
        "2026-02-13": { 
            title: "First day wearing Hairtie üíñ", 
            text: "I am happy wearing it and some of my friends notice it, I lowkey smiled and deep inside of me is a warmth and joy that makes my heart melts as I think of her. I am so happy",  
            images: ["images/diary/hairtie13_1.jpg", "images/diary/hairtie13_2.jpg", "images/diary/hairtie13_3.jpg"]
        }
    };
    

    let currentYear = 2026;
    let slideInterval;

    function initCalendar() {
        const grid = document.getElementById('calendarGrid');
        grid.innerHTML = '';
        document.getElementById('calendarTitle').innerText = `Feb ${currentYear}`;

        // Feb 2026 starts Sun(0), Feb 2025 starts Sat(6), Feb 2024 starts Thu(4)
        const startDayMap = { "2026": 0, "2025": 6, "2024": 4 };
        const startDay = startDayMap[currentYear];
        const daysInFeb = currentYear % 4 === 0 ? 29 : 28;

        // Add empty cells for alignment
        for (let i = 0; i < startDay; i++) {
            grid.appendChild(document.createElement('div'));
        }

        for (let day = 1; day <= daysInFeb; day++) {
            const dateStr = `${currentYear}-02-${day.toString().padStart(2, '0')}`;
            const dayEl = document.createElement('div');
            dayEl.className = 'w-full aspect-square flex flex-col items-center justify-center rounded-full cursor-pointer transition-all hover:bg-pink-100 font-semibold text-gray-700 relative';
            dayEl.innerText = day;
            
            if (diaryEntries[dateStr]) {
                const heart = document.createElement('span');
                heart.className = 'text-[9px] absolute bottom-1';
                heart.innerText = 'üíñ';
                dayEl.appendChild(heart);
            }

            dayEl.onclick = () => {
                document.querySelectorAll('.calendar-day').forEach(d => d.classList.remove('active'));
                dayEl.classList.add('active');
                showDiary(dateStr);
            };
            dayEl.classList.add('calendar-day');
            grid.appendChild(dayEl);
        }
    }

    function showDiary(date) {
        clearInterval(slideInterval);
        const entry = diaryEntries[date] || { 
            title: "A Sweet Memory üß∏", 
            text: "No notes for this date yet, but I'm sure it was a beautiful day with you! ‚ú®üåª", 
            images: ["https://placehold.co/800x500/fff5f7/e91e63?text=A+Beautiful+Moment+‚ù§Ô∏è"] 
        };

        const sliderHTML = `
            <div class="slider-container group">
                <div class="slider-track" id="sliderTrack">
                    ${entry.images.map(img => `
                        <img src="${img}" class="slide" onclick="openModal('${img}')" 
                             onerror="this.src='https://placehold.co/800x500?text=Sweet+Memory'">
                    `).join('')}
                </div>
                <div class="absolute inset-0 pointer-events-none p-4 opacity-50 text-2xl">ü¶ã ‚ú® üå∏</div>
                <button onclick="moveSlide(-1)" class="absolute left-4 top-1/2 -translate-y-1/2 bg-white/40 backdrop-blur-md p-3 rounded-full hover:bg-white transition opacity-0 group-hover:opacity-100 shadow-lg"><i class="fas fa-chevron-left"></i></button>
                <button onclick="moveSlide(1)" class="absolute right-4 top-1/2 -translate-y-1/2 bg-white/40 backdrop-blur-md p-3 rounded-full hover:bg-white transition opacity-0 group-hover:opacity-100 shadow-lg"><i class="fas fa-chevron-right"></i></button>
            </div>
            <div class="p-8">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-3xl font-bold text-gray-800">${entry.title}</h3>
                    <div class="text-3xl animate-pulse">üíù</div>
                </div>
                <div class="w-16 h-1 bg-gradient-to-r from-pink-500 to-transparent mb-6"></div>
                <p class="text-gray-600 text-lg leading-relaxed mb-6">${entry.text}</p>
                <div class="flex gap-4 text-2xl grayscale hover:grayscale-0 transition-all">
                    <span>üòò</span><span>üåª</span><span>üç≠</span><span>üê±‚Äçüë§</span><span>üçì</span>
                </div>
            </div>
        `;

        document.getElementById('diaryDisplay').innerHTML = sliderHTML;
        currentSlide = 0; // Reset slider position
        startAutoSlide(entry.images.length);
    }

    // Modal Functions
    function openModal(src) {
        const modal = document.getElementById('imageModal');
        const modalImg = document.getElementById('modalImg');
        const caption = document.getElementById('modalCaption');
        
        modalImg.src = src;
        caption.innerText = "Click outside or 'X' to close";
        modal.classList.remove('hidden');
        document.body.style.overflow = 'hidden'; // Disable scroll
    }

    function closeModal() {
        document.getElementById('imageModal').classList.add('hidden');
        document.body.style.overflow = 'auto';
    }

    // Slider Logic
    let currentSlide = 0;
    function moveSlide(direction) {
        const track = document.getElementById('sliderTrack');
        if (!track) return;
        const slides = track.children.length;
        currentSlide = (currentSlide + direction + slides) % slides;
        track.style.transform = `translateX(-${currentSlide * 100}%)`;
    }

    function startAutoSlide(count) {
        if(count <= 1) return;
        slideInterval = setInterval(() => moveSlide(1), 4000);
    }

    // Filter Logic
    function changeYear() {
        currentYear = parseInt(document.getElementById('yearFilter').value);
        initCalendar();
        // Reset diary view
        document.getElementById('diaryDisplay').innerHTML = `
            <div class="h-full flex flex-col items-center justify-center p-20 text-center">
                <div class="text-8xl mb-6">üíå</div>
                <h3 class="text-2xl font-bold text-pink-600">Select a date for ${currentYear}</h3>
            </div>
        `;
    }

    // Particle Background
    function createParticles() {
        const container = document.getElementById('particle-container');
        const items = ['üå∏', 'üå∫', 'üíñ', '‚ú®', 'üå∑', 'üíò', 'üåπ', 'ü¶ã'];
        setInterval(() => {
            const p = document.createElement('div');
            p.className = 'floating-item';
            p.innerText = items[Math.floor(Math.random() * items.length)];
            p.style.left = Math.random() * 100 + 'vw';
            p.style.fontSize = (Math.random() * 20 + 20) + 'px';
            p.style.animationDuration = (Math.random() * 5 + 7) + 's';
            p.style.opacity = Math.random() * 0.6 + 0.2;
            container.appendChild(p);
            setTimeout(() => p.remove(), 12000);
        }, 400);
    }

    // Close modal on background click
    document.getElementById('imageModal').onclick = (e) => {
        if(e.target.id === 'imageModal') closeModal();
    };

    document.addEventListener('DOMContentLoaded', () => {
        initCalendar();
        createParticles();
    });
</script>
</body>
</html>
